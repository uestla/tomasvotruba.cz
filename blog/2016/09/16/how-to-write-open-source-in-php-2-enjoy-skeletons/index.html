<!DOCTYPE html>
<html>
    <head>
        <title>How to write open-source in PHP 2: Rise value of your package with help of skeleton | Tomáš Votruba</title>
        <meta charset="utf-8">
        <meta name="robots" content="index, follow">

        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">

    <meta property="og:type" content="article">
    <meta property="og:title" content="How to write open-source in PHP 2: Rise value of your package with help of skeleton">
    <meta property="og:description" content="After creating a repo, we have to fill it with something useful. Our code! Of course, but we also need some metadata files.
What are they for? Is there some prepared code we can use? What are badges for? I will answer all these questions today. ">
    <meta property="og:url" content="http://www.tomasvotruba.cz/blog/2016/09/16/how-to-write-open-source-in-php-2-enjoy-skeletons">
        <meta property="og:image" content="http://www.tomasvotruba.cz/assets/images/posts/thumbnail/open-source.jpg">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="How to write open-source in PHP 2: Rise value of your package with help of skeleton">
    <meta name="twitter:description" content="After creating a repo, we have to fill it with something useful. Our code! Of course, but we also need some metadata files.
What are they for? Is there some prepared code we can use? What are badges for? I will answer all these questions today. ">
        <meta name="twitter:image" content="http://www.tomasvotruba.cz/assets/images/posts/thumbnail/open-source.jpg">

        <link rel="alternate" type="application/rss+xml" title="Tomáš Votruba Blog RSS" href="/rss.xml">

        <link href="/assets/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

        <link href="/assets/bootstrap/bootstrap.min.css" rel="stylesheet" type="text/css">

        <link href="/assets/css/style.css" rel="stylesheet" type="text/css">

    <link href="/assets/prism/prism.css" rel="stylesheet" type="text/css">
    </head>
    <body>
<nav>
    <div class="container">
        <ul class="hidden-xs">
            <li class="logo">
                <a href="/">Tomáš Votruba</a>
            </li>
            <li>
                <a href="/skoleni">Školím a mentoruji</a>
            </li>
            <li>
                <a href="/reference">Spokojení klienti</a>
            </li>
            <li class="active">
                <a href="/blog">Blog</a>
            </li>
            <li>
                <a href="/cenik">Ceník</a>
            </li>
            <li>
                <a href="/kontakt">Kontakt</a>
            </li>
        </ul>

        <div id="mobile-menu" class="row text-center hidden-md hidden-sm hidden-lg">
            <a href="/" class="col-xs-3">
                <em class="fa fa-home"></em>
                <br>
                Začni
            </a>
            <a href="/skoleni" class="col-xs-3">
                <em class="fa fa-thumbs-up"></em>
                <br>
                Školím
            </a>
            <a href="/blog" class="col-xs-3 active">
                <em class="fa fa-book"></em>
                <br>
                Píšu blog
            </a>
            <a href="/kontakt" class="col-xs-3">
                <em class="fa fa-phone"></em>
                <br>
                Kontakt
            </a>
        </div>
    </div>
</nav>

        <div class="mainContent">
    <div class="container" id="post">
        <h1>How to write open-source in PHP 2: Rise value of your package with help of skeleton</h1>

<ul class="list-inline">
    <li>
        <em class="fa fa-clock-o fa-fw"></em>
        <strong>5 min</strong>
    </li>

    <li>
        <em class="fa fa-calendar fa-fw"></em>
        <time datetime="2016-09-Fri">
                16. 9.
        </time>
    </li>

    <li>
        <em class="fa fa-fw fa-comments"></em>
        <a href="http://tomasvotruba.cz/blog/2016/09/16/how-to-write-open-source-in-php-2-enjoy-skeletons/#disqus_thread">X</a>
        comments
    </li>

    <li>
        <em class="fa fa-fw fa-github"></em>

        <a href="https://github.com/TomasVotruba/tomasvotruba.cz/edit/master/source/_posts/2016/2016-09-16-how-to-write-open-source-in-php-2-enjoy-skeletons.md">
            Send PR
        </a>
    </li>
</ul>

        <div class="panel panel-default">
            <div class="panel-body perex">
                After creating a repo, we have to fill it with something useful. Our code! Of course, but we also need some <strong>metadata files</strong>.
What are they for? Is there some prepared code we can use? What are badges for? <strong>I will answer all these questions today.</strong> 
            </div>
        </div>

        

<p>Other programmers who want to use your package are usually looking for <strong>long term value</strong>. 
To estimate the value they need <strong>to answer 4 important questions</strong>.</p>

<ol>
<li><strong>What is quality of package?</strong></li>
<li><strong>Does it solve my issue?</strong></li>
<li><strong>Is it trustworthy?</strong></li>
<li><strong>How well maintained is it?</strong></li>
</ol>

<p>Even if you know your code is the best and the cleanest, if they don't trust you, they will never use it.</p>

<p>I will let you think about them a little bit. We will relate with specific files to them in second part of this article.</p>

<h2>Use solid skeleton → start solid brand</h2>

<p>Now, the first step that can positively influence all the 4 answers is <strong>using a skeleton</strong> with prepared metadata files. Guys from <a href="https://thephpleague.com/">The PHP League</a> already did the job for you and created a <a href="https://github.com/thephpleague/skeleton">skeleton</a> package. From my point of view, <strong>there is too much unnecessary code</strong>, so I've prepared <a href="https://github.com/TomasVotruba/open-source-pakage-skeleton">clear version for you</a>.</p>

<p>Pick one you understand the best.</p>

<h2>How to get skeleton code to your local repository in 4 steps</h2>

<ol>
<li>Go to repository on Github and click on <em>Clone or download</em></li>
<li>Then <em>Download a ZIP</em></li>
<li>Unzip the zip file to your local repository</li>
<li><p>And push new files to Github</p>

<pre><code class="language-bash">git add .
git commit -m "add metadata files"
git push origin master
</code></pre></li>
</ol>

<h3>Great for start, yet obsolete later</h3>

<p>This skeleton is great for start and to learn about metadata files.</p>

<p>But when I create my package now, <strong>I just copy the most recent package I made</strong>, delete <code>/src</code> and <code>/tests</code>
directories and I'm ready to roll. This is because:</p>

<ul>
<li>I upgrade my packages more often then some <code>skeleton</code> package</li>
<li>and because my preferences and required code are evolving

<ul>
<li>e.g. A new PHP version is out, I tune my continuous integration (CI) setup etc.</li>
</ul></li>
</ul>

<h2>What is the purpose of these files</h2>

<p>Now we look on every directory and file and how it's related to the 4 key questions.
Just to remind you, the end user is interested in:</p>

<ol>
<li>Quality - <strong>What is quality of package?</strong></li>
<li>Usability - <strong>Does it solve my issue? Is it easy to use?</strong></li>
<li>Trust - <strong>Is it trustworthy?</strong></li>
<li>Maintenance - <strong>How well maintained is it?</strong></li>
</ol>

<h3><code>/src</code> directory</h3>

<p><em>Meaning</em></p>

<ul>
<li>all your PHP source code will go here</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li>musthave :)</li>
</ul>

<h3><code>/tests</code> directory</h3>

<p><em>Meaning</em></p>

<ul>
<li>all tests for your code in <code>/src</code></li>
<li>basically 1:1 mirror, just every file has <code>Test</code> suffix, e.g.

<ul>
<li><code>src/Cleaner.php</code></li>
<li><code>tests/CleanerTest.php</code></li>
</ul></li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Quality</strong>: tested code is perceived better quality</li>
<li><strong>Trust</strong>: I don't have to hope that code works, <strong>I can trust the code</strong></li>
</ul>

<h3><code>.gitattribues</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>here are all files that are ignored by composer (using the <code>export-ignore</code> attribute)</li>
<li>when somebody will install your package via <code>composer require you/your-package</code>, they won't get these files downloaded to <code>/vendor</code> directory</li>
<li>usually its metadata files and tests, because application of end user does not need them</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Usability</strong>: Since your package save some internet trafic and space on hard drives, it's a bit more usable.</li>
</ul>

<h3><code>.gitignore</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>here are files, that you will have locally but won't be uploaded to the remote git repository</li>
<li>for packages ignore <code>composer.lock</code>, for applications rather not - on Stackoverflow you can find <a href="http://stackoverflow.com/questions/12896780/should-composer-lock-be-committed-to-version-control">more detailed answer</a></li>
<li>also <code>/vendor</code> is there, as dependencies are installed by composer</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Trust</strong>: Without this I would not trust you know anything about open-source.</li>
</ul>

<h3><code>.scrutinzer.yml</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>configuration for <a href="https://scrutinizer-ci.com/">Scrutinizer</a> - code quality and code coverage tool</li>
<li>to enable it, <a href="https://scrutinizer-ci.com/login">login</a> and new repository

<ul>
<li>I recommend you to login in via Github, since it adds hooks to your repository</li>
</ul></li>
<li>it would be triggered every time your commit to master or create a PR</li>
</ul>

<p><em>Profit</em></p>

<div>
    <img src="/../../../../assets/images/posts/2016/open-source/quality-and-coverage.png" alt="Code quality and coverage badges in README">
    <br>
    <em>Code quality and coverage badges in README</em>
</div>

<p><br></p>

<ul>
<li><strong>Quality</strong>: Tests are fine, but with 5 % coverage, they have no added value. When you have 90% coverage, you got attention.
Also there is code quality score from 0 to 10. It tells you about code complexity, which is the most important. <strong>Simple code is easier to maintain and debug</strong>.
I will show you how to get 10 with bit of practise later.</li>
</ul>

<h3><code>.travis.yml</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>configuration for <a href="https://travis-ci.org/">Travis</a> - continuous integration tool for tests</li>
<li>to enable it, go register there and add the repository</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Trust</strong>: Do you have test but you don't run them for every change? How can I know the code works?</li>
</ul>

<h3><code>composer.json</code></h3>

<ul>
<li>list of dependencies</li>
<li>also configuration for <a href="https://packagist.org/">Packagist</a>, where you need to add your package, so it can be installed by others</li>
<li>to enable it, you have to:

<ul>
<li>go there</li>
<li>add repository</li>
<li>go to settings of package, <strong>Integration and services</strong> and <strong>Add Service</strong></li>
<li>select "Packagist" and add your name and token from your <a href="https://packagist.org/profile/">user profile</a></li>
</ul></li>
</ul>

<h3><code>LICENSE</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>license goes here</li>
<li>it's important to have it as every country has different default approach, when this file is missing</li>
<li><a href="https://opensource.org/licenses/MIT">MIT</a> is the easiest to understand open-source license</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Usability</strong>: With licence, I know what I can do with the code. Usually everything.</li>
</ul>

<h3><code>phpunit.xml</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>configuration for <a href="https://phpunit.de/">PHPUnit</a> - testing tool</li>
<li>this can be used either by end user or Travis</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Usability</strong>: I can run <code>vendor/bin/phpunit</code> with no manual configuration. It makes life easy.</li>
</ul>

<h3><code>README</code></h3>

<p><em>Meaning</em></p>

<ul>
<li>last but the most important - your welcome article for user</li>
<li>THE MOST IMPORTANT FILE IN THE PACKAGE!</li>
<li>Don't worry. We'll talk about writing a good readme later.</li>
</ul>

<p><em>Profit</em></p>

<ul>
<li><strong>Usability</strong>: If I understand the usage, I can rely to the issue I want to solve.</li>
<li><strong>Trust</strong>: Having code quality, Travis and coverage badges helps to identify the quality of the package.</li>
</ul>

<p>So that are all files and their purpose.</p>

<h2>No time! Fast! Now! → Tell your story with an image</h2>

<p>Today people are scanning the text rather then actually reading. That's why badges are so important!</p>

<p>Look on these 2 - what information can we get?</p>

<p><img src="/../../../../assets/images/posts/2016/open-source/badge-2.png" alt="Confusing badge"></p>

<ul>
<li>Test are passing - <strong>GOOD</strong></li>
<li>There is stable tag with "?" coverage - <strong>CONFUSING</strong></li>
<li>Master has 89% test coverage - <strong>GOOD</strong></li>
<li>Last version is probably 2.5, but not sure. Do they update manually? - <strong>CONFUSING</strong></li>
<li>Why is master promoted on first place? Should I use that? - <strong>CONFUSING</strong></li>
</ul>

<p><small>From <a href="https://github.com/doctrine/doctrine2/blob/master/README.md">Doctrine2 repository</a>.</small></p>

<p><img src="/../../../../assets/images/posts/2016/open-source/badge-1.png" alt="Well informative badge"></p>

<ul>
<li>Test are passing - <strong>GOOD</strong></li>
<li>Code quality is 10 - <strong>GOOD</strong></li>
<li>Code coverage 93% test coverage - <strong>GOOD</strong></li>
<li>It has 166 downloads. Here it depends on the age of package. → Go check release date! - <strong>GOOD</strong></li>
<li>It's tagged and has stable version. - <strong>GOOD</strong></li>
</ul>

<p><small>From <a href="https://github.com/Symplify/ControllerAutowire/blob/master/README.md">Symplify/ControllerAutowire repository</a>.</small></p>

<h2>What have we done today?</h2>

<ul>
<li>Where to go when <strong>starting a new repository</strong>.</li>
<li>What is <strong>the purpose meta files</strong>.</li>
<li>How to <strong>enable online services</strong> that help us to build better code.</li>
</ul>

<h2>What's next?</h2>

<ul>
<li>We'll peek on <strong>coding standards</strong>.</li>
<li>How do <strong>releases</strong> work a what is <strong>semantic versioning</strong>.</li>
<li>How to <strong>pick min PHP version and package versions in composer</strong>.</li>
</ul>

<hr>

<h2>Hate me, please!</h2>

<p>Did you came across some error or wtf? Is it boring, too long or too vague?
Just send me a comment. I want to make this series bulletproof and as helpful as possible.</p>

<p><strong>You will help thousands of others if you help me to fix one issue.</strong></p>

<p>Thank you!</p>


        <h2>I care about your opinion</h2>

<div id="disqus_thread"></div>

<script type="text/javascript">
    var disqus_config = function () {
        this.language = "en"
    };

    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');

        s.src = '//' + "itsworthsharing" + '.disqus.com/embed.js';

        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
    </div>
        </div>

    <script src="/assets/prism/prism.js"></script>
    <script id="dsq-count-scr" src="http://itsworthsharing.disqus.com/count.js" async defer></script>

<script>
    ga=function(){ ga.q.push(arguments) };
    ga.q=[];
    ga.l=+new Date;
    ga('create', "UA-46082345-1", 'auto');
    ga('send','pageview');
</script>
<script src="https://www.google-analytics.com/analytics.js" async defer></script>
<script>
    !function(f,b,e,v,n,t,s){ if(f.fbq)return;n=f.fbq=function(){ n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
            document,'script','https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', "201338863559186");
    fbq('track', 'PageView');
</script>
    </body>
</html>
